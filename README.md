# Новостной блог (Laravel News Blog)

Проект новостного блога с API интерфейсом, построенный на Laravel и Vue.js.

## Описание проекта

Проект представляет собой современный новостной блог со следующим функционалом:

### Публичная часть
- Просмотр списка статей с фильтрацией и поиском
- Просмотр отдельных статей с изображениями
- Система комментариев с поддержкой древовидной структуры
- Возможность ответа на комментарии
- Теги для категоризации статей
- Адаптивный дизайн с использованием Tailwind CSS

### Административная панель
- CRUD операции для управления статьями
- Управление статусами публикаций (черновик/опубликовано)
- Загрузка и управление изображениями
- Управление тегами
- Модерация комментариев
- Статистика просмотров и комментариев
- Графики активности по временным периодам

### Технические особенности
- SPA (Single Page Application) на базе Inertia.js
- Real-time обновления через WebSockets (Pusher)
- REST API для всех операций
- Система уведомлений с использованием Vue Toastification
- Отложенная загрузка изображений
- Кэширование данных
- Валидация форм на клиенте и сервере

### Безопасность и производительность
- Централизованная обработка ошибок через HandlesErrors trait
- Гибкая система rate limiting с разными лимитами для разных эндпоинтов
- Валидация всех входящих данных через Form Requests
- Защита от CSRF атак
- Авторизация через Policies
- Кэширование статей и комментариев
- Оптимизированные SQL запросы с правильными индексами

### WebSocket функционал
- Real-time обновления комментариев
  - Мгновенное добавление новых комментариев
  - Обновление существующих комментариев
  - Удаление комментариев
- Каналы для каждой статьи (`article.{id}`)
- Поддержка Pusher в качестве broadcast драйвера

### Валидация данных
- Статьи:
  - Заголовок (обязательный, макс. 255 символов)
  - Контент (обязательный, мин. 10 символов)
  - Изображение (опционально, макс. 2MB, определенные размеры)
  - Теги (массив существующих ID)
- Комментарии:
  - Контент (обязательный, 3-1000 символов)
  - Родительский комментарий (опционально, должен существовать)
- Просмотры статей:
  - IP адрес (обязательный, валидный формат)
  - ID пользователя (опционально, должен существовать)
- Пользователи:
  - Имя (обязательное, 2-255 символов)
  - Email (обязательный, уникальный, валидный формат)
  - Пароль (обязательный при создании)
  - Роль (только для админа)

## Структура базы данных

Основные сущности:
- Users (Пользователи)
  - Роли: администратор/пользователь
  - Управление доступом через Policies
- Articles (Статьи)
  - Поддержка черновиков
  - Загрузка изображений
  - Связь с тегами
- Comments (Комментарии)
  - Древовидная структура
  - Real-time обновления
- Tags (Теги)
  - SEO-friendly slugs
- Article Views (Просмотры статей)
  - Отслеживание уникальных просмотров
  - Поддержка анонимных просмотров

Детальная ER-диаграмма доступна в файле `database/ER-diagram.md`

## Требования

- PHP 8.2+
- Laravel 10+
- Node.js 18+
- MySQL 8.0+
- Composer 2+
- NPM 9+

## Установка

1. Клонировать репозиторий:
```bash
git clone [url-репозитория]
```

2. Установить зависимости:
```bash
composer install
npm install
```

3. Настроить окружение:
```bash
cp .env.example .env
php artisan key:generate
```

4. Настроить подключение к базе данных в `.env`

5. Настроить Pusher для real-time функционала в `.env`:
```env
PUSHER_APP_ID=your-app-id
PUSHER_APP_KEY=your-app-key
PUSHER_APP_SECRET=your-app-secret
PUSHER_HOST=
PUSHER_PORT=443
PUSHER_SCHEME=https
PUSHER_APP_CLUSTER=eu
```

6. Выполнить миграции и заполнить базу тестовыми данными:
```bash
php artisan migrate --seed
```

7. Создать символическую ссылку для хранения файлов:
```bash
php artisan storage:link
```

## Тестовые данные

В системе предусмотрены тестовые учетные записи:

1. Администратор:
   - Email: admin@example.com
   - Пароль: password

2. Пользователь:
   - Email: user@example.com
   - Пароль: password

## Разработка

Для запуска в режиме разработки:
```bash
php artisan serve
npm run dev
```

## Сборка для продакшена

```bash
npm run build
```

## API Документация

API документация доступна по адресу `/api/documentation` после запуска проекта.

## Тестирование

Для запуска тестов:
```bash
php artisan test
```

## Особенности реализации

1. Frontend:
   - Vue 3 с Composition API
   - Inertia.js для SPA
   - Tailwind CSS для стилей
   - Vue Toastification для уведомлений
   - Axios для HTTP запросов
   - Lodash для утилит

2. Backend:
   - Laravel 10
   - Laravel Sanctum для API аутентификации
   - Pusher для WebSocket
   - Spatie Media Library для файлов
   - Laravel Policies для авторизации

## Лицензия

MIT License
